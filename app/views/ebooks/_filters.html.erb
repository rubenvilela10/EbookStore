<aside class="lg:col-span-1 bg-white rounded-2xl shadow p-6 h-fit sticky top-10 space-y-8">
  <h2 class="text-2xl font-bold text-gray-800">Filters</h2>
  <%= form_with url: ebooks_path, method: :get, local: true, class: "space-y-8" do |f| %>

    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Price Range</h3>

      <div class="flex items-center gap-4">
        <%= f.number_field :min_price,
              value: params[:min_price],
              placeholder: "Min €",
              class: "w-24 border rounded-lg px-2 py-1 text-sm" %>

        <%= f.number_field :max_price,
              value: params[:max_price],
              placeholder: "Max €",
              class: "w-24 border rounded-lg px-2 py-1 text-sm" %>
      </div>
    </div>

    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Author</h3>
      <%= f.select :author,
            Ebook.distinct.pluck(:author),
            { include_blank: "All authors" },
            class: "w-full border rounded-lg px-2 py-2 text-sm" %>
    </div>

    <div>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">Seller</h3>
      <%= f.select :seller_id,
            User.joins(:ebooks).distinct.pluck(:name, :id),
            { include_blank: "All sellers" },
            class: "w-full border rounded-lg px-2 py-2 text-sm" %>
    </div>

    <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Tags</h3>
        <%= f.select :tag,
                Tag.all.pluck(:name, :name),
                {include_blank: "All tags"},
                class: "w-full border rounded-lg px-2 py-2 text-sm" %>
    </div>

    <div>
        <label class="font-medium text-gray-700">Year</label>
        <%= number_field_tag :year,
                params[:year],
                min: 1800,
                max: Date.current.year,
                placeholder: Date.current.year,
                class: "w-full border rounded-lg px-3 py-2" %>
    </div>

    <div class="flex flex-col gap-3 pt-4">
      <%= f.submit "Apply Filters",
            class: "bg-emerald-600 text-white py-2 rounded-lg hover:bg-emerald-700 font-semibold" %>

      <%= link_to "Clear Filters",
            ebooks_path,
            class: "text-center py-2 rounded-lg border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium" %>
    </div>
  <% end %>
</aside>